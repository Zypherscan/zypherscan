# Nixpacks configuration for Railway deployment
# This ensures both Rust and Node.js are available during build

[phases.setup]
nixPkgs = ["nodejs_20", "rustc", "cargo", "pkg-config", "openssl"]

[phases.install]
cmds = ["npm install -g pnpm@latest", "pnpm install"]

[phases.build]
cmds = [
  "cd zypherscan-decrypt && cargo build --release && cd ..",
  "pnpm run build"
]

[phases.start]
cmd = "node zypherscan-decrypt/server.js"
